/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.core.min"],e)}(function(){return function(e,n,t){"use strict";function a(a,i,r,u,c){var l,s,d=u.replace(/^kendo/,""),f=n.extend({},a.$eval(r.kOptions));return e.each(r,function(e,o){var i,r;h[e]||(i=e.match(/^k(On)?([A-Z].*)/),i&&(r=i[2].charAt(0).toLowerCase()+i[2].slice(1),i[1]&&"kOnLabel"!=e?f[r]=o:("kOnLabel"==e&&(r="onLabel"),f[r]=n.copy(a.$eval(o)),f[r]===t&&o.match(/^\w*$/)&&v.warn(u+"'s "+e+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+o+"'?"))))}),r.kDataSource&&(f.dataSource=k(a,i,r,d)),f.$angular=[a],(l=e(i)[u])?(s=l.call(i,$=f).data(u),o(s,a,r,u,c),a.$emit("kendoWidgetCreated",s),s):(window.console.error("Could not find: "+u),null)}function o(e,n,t,a,o){if(t[o]){var i=p(t[o]).assign;if(!i)throw Error(o+" attribute used but expression in it is not assignable: "+t[a]);i(n,e)}}function i(e){return/^kendo/i.test(e.prop("tagName"))}function r(e,n){function t(e,n){f.directive(e,["directiveFactory",function(t){return t.create(n,e)}])}var a,o=n?"Mobile":"";o+=e.fn.options.name,a="kendo"+o.charAt(0)+o.substr(1).toLowerCase(),o="kendo"+o,t(o,o),a!=o&&t(a,o)}function u(n){return n=e(n),kendo.widgetInstance(n,kendo.ui)||kendo.widgetInstance(n,kendo.mobile.ui)||kendo.widgetInstance(n,kendo.dataviz.ui)}function c(e,n,t,a){e.bind.call(e,n,t,a);var o=e._events[n];o.unshift(o.pop())}function l(e){/^\$(digest|apply)$/.test(e.$root.$$phase)||e.$digest()}function s(n,t){n.$destroy(),t&&e(t).removeData("$scope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function d(t,a,o){var i,r,u;if(e.isArray(t))return n.forEach(t,function(e){d(e,a,o)});if("string"==typeof t){for(i=t.split("."),r=kendo;r&&i.length>0;)r=r[i.shift()];if(!r)return b.push([t,a,o]),!1;t=r.prototype}return u=t[a],t[a]=function(){var e=this,n=arguments;return o.apply({self:e,next:function(){return u.apply(e,arguments.length>0?arguments:n)}},n)},!0}var f,p,m,g,v,$,k,h,b;n&&(f=n.module("kendo.directives",[]),k=function(){var e={TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN"},n=function(e,n){return"$PLAIN"==n?e:kendo.data[n].create(e)};return function(t,a,o,i){var r=e[i]||"DataSource",c=n(t.$eval(o.kDataSource),r);return t.$watch(o.kDataSource,function(e,t){var o,i;e!==t&&(o=n(e,r),i=u(a),i&&"function"==typeof i.setDataSource&&i.setDataSource(o))}),c}}(),h={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},f.factory("directiveFactory",["$timeout","$parse","$compile","$log",function(n,o,r,u){var s,d;return m=n,p=o,g=r,v=u,s=0,d=function(n,o){return{restrict:"ACE",require:["?ngModel","^?form"],scope:!1,transclude:!0,controller:["$scope","$attrs","$element","$transclude",function(e,n,t,a){i(t)&&!function(){var e,a,o,i,r=t[0];for(n.$kendoOrigElement=r.cloneNode(!0),e=Array.prototype.slice.call(r.attributes),a=0;e.length>a;++a)o=e[a].nodeName,/^(k|ng)-/.test(o)||/^(style|class|id)$/.test(o)||(i=("k-"+o).replace(/-(.)/g,function(e,n){return n.toUpperCase()}),i in n||(n[i]=e[a].nodeValue),r.removeAttribute(o))}(),a(e,function(e){t.append(e)})}],link:function(i,r,u,d){var f,$=d[0],k=d[1];e(r)[0].removeAttribute("data-"+n.replace(/([A-Z])/g,"-$1")),++s,f=u.kNgDelay,m(function h(){function d(){function e(e){return/checkbox|radio/i.test(e.attr("type"))?e.prop("checked"):e.val()}function n(){return y?e(r):w.value()}var a,o,s,d,f,g,h,b,y=/^(input|select|textarea)$/i.test(r[0].tagName);x&&x(),x=i.$on("$destroy",function(){w&&(w.element&&w.destroy(),w=null)});e:if($){if(!w.value)break e;if($.$render=function(){var e=$.$viewValue;e===t&&(e=$.$modelValue),setTimeout(function(){w.value(e)},0)},y&&r.on("change",function(){a=!0}),o=function(e){return function(){a=!1,m(function(){var t;a||(e&&k&&(t=k.$pristine),$.$setViewValue(n()),e&&($.$setPristine(),t&&k.$setPristine()))})}},c(w,"change",o(!1)),c(w,"dataBound",o(!0)),s=n(),s!=$.$viewValue&&($.$isEmpty($.$viewValue)?null!=s&&""!==s&&s!=$.$viewValue&&$.$setViewValue(s):w.value($.$viewValue)),$.$setPristine(),k){for(d=r;d.controller("form");)f=d.controller("form"),d=d.parent();f.$setPristine()}}e:if(u.kNgModel){if("function"!=typeof w.value){v.warn("k-ng-model specified on a widget that does not have the value() method: "+w.options.name);break e}g=p(u.kNgModel),h=g.assign,b=!1,w.value(g(i)),i.$watch(u.kNgModel,function(e,n){b||e!==n&&w.value(e)}),c(w,"change",function(){b=!0,h(i,w.value()),l(i),b=!1})}}var b,y,w,x;return f?function(){var e=i.$watch(f,function(n,t){n!==t&&(e(),f=null,m(h))},!0)}():(u.kRebind&&(b=u.$kendoOrigElement||e(r)[0].cloneNode(!0),y=i.$watch(u.kRebind,function(n,t){var a,o,u;n!==t&&(y(),a=e(w.wrapper)[0],o=e(w.element)[0],w.destroy(),w=null,a&&o&&(a.parentNode.replaceChild(o,a),u=b.cloneNode(!0),e(r).replaceWith(u),r=e(u)),g(r)(i))},!0)),w=a(i,r,u,n,o),d(),x=null,function(){function n(){o.disconnect()}function t(){o.observe(e(r)[0],{attributes:!0})}var a,o;window.MutationObserver&&w.wrapper&&(a=[].slice.call(e(r)[0].classList),o=new MutationObserver(function(o){n(),w&&(o.forEach(function(n){var t,o=e(w.wrapper)[0];switch(n.attributeName){case"class":t=[].slice.call(n.target.classList),t.forEach(function(e){a.indexOf(e)<0&&(o.classList.add(e),w instanceof kendo.ui.ComboBox&&w.input[0].classList.add(e))}),a.forEach(function(e){t.indexOf(e)<0&&(o.classList.remove(e),w instanceof kendo.ui.ComboBox&&w.input[0].classList.remove(e))}),a=t;break;case"disabled":"function"==typeof w.enable&&w.enable(!e(n.target).attr("disabled"));break;case"readonly":"function"==typeof w.readonly&&w.readonly(!!e(n.target).attr("readonly"))}}),t())}),t(),c(w,"destroy",n))}(),--s,0===s&&i.$emit("kendoRendered"),t)})}}},{create:d}}]),function(){function e(e){return function(t){n.forEach(t,function(n){n.fn&&n.fn.options&&n.fn.options.name&&/^[A-Z]/.test(n.fn.options.name)&&r(n,e)})}}n.forEach([kendo.ui,kendo.dataviz&&kendo.dataviz.ui],e(!1)),n.forEach([kendo.mobile&&kendo.mobile.ui],e(!0))}(),b=[],d(kendo.ui,"plugin",function(n,t,a){this.next(),b=e.grep(b,function(e){return!d.apply(null,e)}),r(n,"Mobile"==a)}),d(["ui.Widget","mobile.ui.Widget"],"angular",function(a,o){var i,r,u,c,d=this.self;if("init"==a)return!o&&$&&(o=$),$=null,o&&o.$angular&&(d.$angular_scope=o.$angular[0],d.$angular_init(d.element,o)),t;if(i=d.$angular_scope||n.element(d.element).scope(),i&&(r=o(),u=r.elements,c=r.data,u.length>0))switch(a){case"cleanup":n.forEach(u,function(e){var t=n.element(e).scope();t&&t!==i&&s(t)});break;case"compile":n.forEach(u,function(a,o){var u,l;r.scopeFrom?u=n.element(r.scopeFrom).scope():(l=c&&c[o],l!==t&&(u=e.extend(i.$new(),l))),g(a)(u||i)}),l(i)}}),d("ui.Widget","$angular_init",function(n,t){var a,o,i,r,u=this.self;if(t&&!e.isArray(t))for(a=u.$angular_scope,o=u.events.length;--o>=0;)i=u.events[o],r=t[i],r&&"string"==typeof r&&(t[i]=u.$angular_makeEventHandler(i,a,r))}),d("ui.Widget","$angular_makeEventHandler",function(e,n,t){return t=p(t),function(e){/^\$(apply|digest)$/.test(n.$root.$$phase)?t(n,{kendoEvent:e}):n.$apply(function(){t(n,{kendoEvent:e})})}}),d(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,t,a){return"change"!=e?this.next():(a=p(a),function(e){var o,i,r,u,c,l,s,d,f,p=e.sender,m=p.options,g={kendoEvent:e};for(n.isString(m.selectable)&&(o=-1!==m.selectable.indexOf("cell"),i=-1!==m.selectable.indexOf("multiple")),r=g.selected=this.select(),u=g.data=[],c=g.columns=[],s=0;r.length>s;s++)d=o?r[s].parentNode:r[s],f=p.dataItem(d),o?(n.element.inArray(f,u)<0&&u.push(f),l=n.element(r[s]).index(),n.element.inArray(l,c)<0&&c.push(l)):u.push(f);i||(g.dataItem=g.data=u[0],g.selected=r[0]),t.$apply(function(){a(t,g)})})}),d("ui.Grid","$angular_init",function(t,a){if(this.next(),a.columns){var o=e.extend({},kendo.Template,a.templateSettings);n.forEach(a.columns,function(e){!e.field||e.template||e.format||e.values||(e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,o.paramName)+"#</span>")})}}),d("mobile.ui.ButtonGroup","value",function(e){var n=this.self;return null!=e&&(n.select(n.element.children("li.km-button").eq(e)),n.trigger("change"),n.trigger("select",{index:n.selectedIndex})),n.selectedIndex}),d("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}))}(window.kendo.jQuery,window.angular),window.kendo},"function"==typeof define&&define.amd?define:function(e,n){n()});